import{j as s}from"./jsx-runtime.QP8Mob9_.js";import{r as h}from"./index.pNoFJhTY.js";/* empty css                      */import{c as I,d as g,e as B,g as L,h as w,f as R}from"./index.Y4Dug0KJ.js";import{F as N}from"./index.es.WhasW7UM.js";import{I as y,X as C}from"./links.bfGoVwJ1.js";import"./_astro-entry_react-tooltip.HiLi5d6c.js";/* empty css                       */const l=({icon:e,count:o,className:c})=>{const f=[];for(let n=0;n<o;n++)f.push(s.jsx(N,{icon:e,className:c?c+" recipe-icon":"recipe-icon"},n));return f},D=(e,o)=>{const c={timeZone:"UTC",year:"numeric",month:"long",day:"numeric"};return o?e.toLocaleDateString("en-us",c):e.toISOString().split("T")[0].replaceAll("-",".")},O=e=>s.jsxs("div",{className:"blog-ssf-entry",children:[s.jsx(y,{href:e.slug,children:e.title})," ",s.jsx("span",{className:"blog-ssf-date",children:D(e.date)})]},e.slug),T=e=>s.jsxs("div",{className:"recipe-container",children:[s.jsx(y,{href:"recipes/"+e.slug,className:"internal-link recipe-link",children:e.title})," ",s.jsx(l,{icon:I,count:e.time<=15?1:0,className:"clock"}),s.jsx(l,{icon:g,count:e.rating,className:"star"}),s.jsx(l,{icon:B,count:e.veg??0,className:"sprout"}),s.jsx(l,{icon:L,count:e.asian?1:0,className:""}),s.jsx(l,{icon:w,count:e.spicy??0,className:"pepper"})]},e.slug),U={vegetarian:e=>e.veg?e.veg>=1:!1,vegan:e=>e.veg?e.veg===2:!1,"no asian grocery":e=>!e.asian,quick:e=>e.time<=15},$=e=>s.jsxs("div",{className:"book-container",children:[s.jsx("img",{src:`/img/books/${e.image}`,alt:e.title}),s.jsxs("div",{className:"book-right",children:[s.jsxs("div",{children:[s.jsx("span",{className:"book-title",children:e.title}),s.jsxs("span",{className:"book-author",children:["by ",e.author]})]}),s.jsxs("div",{children:[e.genres&&s.jsxs("span",{className:"book-genres",children:[e.genres," // "]}),e.place&&s.jsxs("span",{className:"book-place",children:[s.jsx(N,{icon:R,className:"pin"}),e.placeUrl?s.jsx(C,{href:e.placeUrl,label:e.place,className:"link blue-link",children:e.place}):e.place]})]}),s.jsx("div",{children:s.jsx(l,{icon:g,count:e.rating,className:`intro-star star${e.rating}`})}),s.jsx("p",{className:"book-description",children:e.description})]})]},e.title),G=({sortCategories:e,items:o,type:c,useSearch:f,itemCategories:n,defaultSort:j})=>{const[r,u]=h.useState(j??{category:"",state:"none"}),[d,v]=h.useState({});let i;var p;switch(c){case"blog":p=O;break;case"recipe":p=T,i=U;break;case"book":p=$;break;default:console.error("unsupported factory type",c);return}const S=t=>{r.category===t?r.state==="desc"?u({category:t,state:"asc"}):u(j??{category:"",state:"none"}):u({category:t,state:"desc"})},x=(t,a)=>r.state==="none"?0:r.state==="asc"?t[r.category]>a[r.category]?1:-1:t[r.category]<a[r.category]?1:-1,F=s.jsx(s.Fragment,{children:e&&e.map(t=>s.jsxs("span",{className:`category-btn ${r.category===t?"category-selected":""}`,onClick:()=>S(t),children:[t,r.category===t&&(r.state==="asc"?"↑":"↓")]},t)).reduce((t,a)=>[t,"|",a])}),k=i?Object.keys(i).map(t=>s.jsx("span",{className:d[t]?"filter-btn category-selected":"filter-btn ",onClick:()=>{if(!i)return;let a={...d};d[t]?delete a[t]:a[t]=i[t],v(a)},children:t},t)).reduce((t,a)=>[t,"|",a]):void 0;let m=o;for(const t of Object.keys(d))m=m.filter(d[t]);return s.jsxs(s.Fragment,{children:[e&&s.jsxs("div",{className:"sort",children:["sort by: ",F]}),i&&s.jsxs("div",{className:"filter",children:["filter by: ",k]}),n?n.map((t,a)=>s.jsxs(h.Fragment,{children:[s.jsx("h3",{children:t}),m.filter(b=>b.category===t).sort(x).map(p)]},a)):m.sort(x).map(p)]})};export{G as default};
