# Color App Implementation Decisions

## Layout & Structure

1. **Separate ColorLayout component** - Created a fully isolated layout in `src/components/color-app/` rather than extending the existing `layout.astro`. This keeps the color app styling completely separate from the main site.

2. **Single SCSS file** - All styles are in `color_app.scss` which imports only `_fonts`, `_mixins`, and `_spacing` from the existing sass partials, as specified.

3. **Color books in public folder** - Copied color book JSON files to `public/color-books/` to enable dynamic fetching. This allows lazy loading of large color datasets without bundling them into the JavaScript.

## Fonts

1. **Manrope variable font** - Added `@font-face` declaration for Manrope using the variable font file that was already in `/public/fonts/Manrope/`. Note: Manrope is a sans-serif font, not serif as originally noted in the prompt.

2. **FiraCode variable font** - Added `@font-face` declaration for FiraCode using the existing variable font file.

## Palettes Page

1. **Intersection Observer threshold** - Using 0.3 (30% visibility) to trigger header color changes. This provides a good balance between responsiveness and preventing rapid changes during fast scrolling.

2. **Color assignments** - Assigned tags (background, secondary, text, highlight) to colors based on their typical use in each palette:
   - Catppuccin: Blue as highlight (brand color), Text as text, Surface 0 as secondary, Base as background
   - bencuan.me v7: Palm Tree Island as highlight (brand green), Anthracite as text, Aspen Green as secondary, Stalactite as background
   - Dracula: Purple as highlight, Foreground as text, Current Line as secondary, Background as background

3. **Last palette min-height** - Set to 100vh to ensure users can scroll enough to see the header change for the final palette.

## Explorer Page

1. **LAB to RGB conversion** - Implemented using D50 illuminant with Bradford chromatic adaptation to D65 for sRGB output. This matches standard color management workflows.

2. **Lazy loading strategy** - Initial load of 100 colors, then load 50 more when user scrolls within 500px of bottom. This provides good initial performance while maintaining smooth scrolling.

3. **Size slider ratcheting** - Implemented discrete steps at [4, 6, 8, 10, 12] columns. The slider snaps to the nearest value for a ratcheting effect.

4. **Default color book** - Set to "PANTONE F+H cotton TCX" which is the book that has corresponding friendly names in `_pantone-color-names.json`.

5. **Friendly name extraction** - Parsing PANTONE color names for the numeric code (e.g., "11-4201" from "PANTONE 11-4201 TCX") and looking up the friendly name in the JSON file. Names are title-cased for display.

6. **Star toggle behavior** - Clicking the star toggles favorite status (add/remove), with the star icon changing between outline and filled states.

## About Page

1. **Author attribution** - Replaced "INSERT YOUR NAME HERE" with "Claude" as this page was generated by Claude.

## Mobile Considerations

1. **Favorites panel hidden on mobile** - The favorites controls (preset/filter/clear) and size slider are hidden on mobile to keep the interface clean.

2. **Responsive grid** - Explorer grid adjusts padding and gap on mobile devices.

3. **Header stacks vertically on mobile** - Navigation links move below the title on narrow screens.
